- pipeline: "test deploy"
  events:
    - type: "PUSH"
      refs:
        - "refs/heads/*"  # Match all branches
  actions:
    - action: "run npm install"
      type: "BUILD"
      working_directory: "/buddy/app/app/service-a"
      docker_image_name: "library/node"
      docker_image_tag: "20"
      execute_commands:
        - "pwd"  # Print current working directory
        - "ls -l"  # List files in the directory    
        - "# yarn install"
        - "npm install"
      shell: "BASH"
    
    - action: "Build Docker image"
      type: "DOCKERFILE"
      dockerfile_path: "app/service-a/Dockerfile"
      context_path: "app/service-a"
      do_not_prune_images: true
      integration_hash: "EYgLPQZOpnelXGGreKBzyVXvAW"
      execute_commands:
        - "pwd"  # Print current working directory
        - "ls -l"  # List files in the directory
        - "docker image ls"      
      shell: "BASH"
